<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="description"><meta name="keyword"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta http-equiv="X-UA-Compatible" content="IE=edge"><title>为什么你应该在相等比较中使用 Object.is()</title><link rel="shortcut icon" href="/images/avatar.png" type="image/x-icon"><link href="/fetips/styles/site.css" rel="stylesheet"><link href="https://fonts.googleapis.com/css?family=Merriweather|Lato" rel="stylesheet"></head><body><header class="container" id="header"><div class="header"><div class="header-left"><div class="brand"><div class="brand-name"><h1 class="logo"><a href="/">fetips</a></h1></div><div class="about-me">一日一集前端小知识</div></div></div><div class="header-right"><ul class="navigation"></ul></div><div class="about-me-mask"><div class="about-me-wrap"><div class="about-me__header"><div class="avatar"><img src="/images/avatar.png"></div></div><ul class="socials"><li class="social-item"><span class="label"><img src="/images/socials/github.svg" alt="https://github.com/gary-Shen"></span><a href="https://github.com/gary-Shen" target="_blank" title="https://github.com/gary-Shen">https://github.com/gary-Shen</a></li><li class="social-item"><span class="label"><img src="/images/socials/email.svg" alt="guanlinshen@126.com"></span><span>guanlinshen@126.com</span></li><li class="social-item"><span class="label"><img src="/images/socials/wechat.svg" alt="Grinson"></span><span>Grinson</span></li></ul></div></div></div></header><div class="container post"><section class="article"><h2 class="title">为什么你应该在相等比较中使用 Object.is()</h2><div class="date">写于2018-08-01日</div><div class="content"><p>我们都知道 JavasSript 是弱类型的，并且当我们使用 == 作比较时，在一些情况下由于类型转换或者说“把两个操作数中的一个转换成另一个，然后在比较”，会出现意想不到的结果。<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">0</span> == <span class="string">' '</span> <span class="comment">//true</span></span><br><span class="line"><span class="literal">null</span> == <span class="literal">undefined</span> <span class="comment">//true</span></span><br><span class="line">[<span class="number">1</span>] == <span class="literal">true</span> <span class="comment">//true</span></span><br></pre></td></tr></table></figure></p>
<p>因此 <code>JavaScript</code> 中给我们提供了全等操作符 ===, 它比不全等操作符更加严格并且不会发生类型转换。但是用 === 来进行比较并不是最好的解决方案。你可能会得到：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="literal">NaN</span> === <span class="literal">NaN</span> <span class="comment">//false</span></span><br></pre></td></tr></table></figure>
<p>好消息是 ES6 中提供了新的 Object.is() 方法，它具有 === 的一些特点，而且更好、更精确，在一些特殊案例中表现的很好：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Object</span>.is(<span class="number">0</span> , <span class="string">' '</span>); <span class="comment">//false</span></span><br><span class="line"><span class="built_in">Object</span>.is(<span class="literal">null</span>, <span class="literal">undefined</span>); <span class="comment">//false</span></span><br><span class="line"><span class="built_in">Object</span>.is([<span class="number">1</span>], <span class="literal">true</span>); <span class="comment">//false</span></span><br><span class="line"><span class="built_in">Object</span>.is(<span class="literal">NaN</span>, <span class="literal">NaN</span>); <span class="comment">//true</span></span><br></pre></td></tr></table></figure></p>
<p>Mozilla 团队并不认为 Object.is 比 === 更加“严格”，他们说我们应该考虑的是这个方法如何处理 NaN, -0 和 +0。但是总的来说， 我认为它在实际应用中是一个很好的实践。</p>
<p>现在来看看这张图表的对比…</p>
<p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="noopener">Deployment</a></p>
</div><div class="tags"></div></section></div><div class="container"><ul class="nav"><li>上一篇：<a href="/fetips/2018/08/01/third/">使用 tap 来快速 debug</a></li><li>下一篇：<a href="/fetips/2018/07/31/hello-world/">Hello World</a></li></ul></div><div id="backToTop"><div class="back-arrow back-arrow-left"></div><div class="back-arrow back-arrow-right"></div></div><footer class="container"><div class="rights"><span>Powered by</span><a href="http://hexo.io" target="_blank">Hexo</a><span>, Theme</span><a href="https://github.com/stephenzhao/hexo-theme-fetips" target="_blank">Fetips</a><span>.</span></div></footer><script src="/fetips/script/jquery.min.js"></script><link rel="stylesheet" href="/fetips/fancybox/jquery.fancybox.css"><script src="/fetips/fancybox/jquery.fancybox.pack.js"></script><script src="/fetips/script/index.js"></script><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-61220413-1', 'auto');
ga('send', 'pageview');</script><script src="/fetips/script/jquery.min.js"></script><link rel="stylesheet" href="/fetips/fancybox/jquery.fancybox.css"><script src="/fetips/fancybox/jquery.fancybox.pack.js"></script><script src="/fetips/script/index.js"></script><script src="/fetips/script/post.js"></script></body></html>